# Re-Voice è¦ä»¶ãƒ»æ±ºå®šäº‹é …

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

YouTubeã®å¤–å›½èªå‹•ç”»ã‚’æ—¥æœ¬èªå¹æ›¿ç‰ˆã«å¤‰æ›ã™ã‚‹ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Tauri App                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ACP Orchestrator                      â”‚   â”‚
â”‚  â”‚         (ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚ ACP Message                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚          â–¼               â–¼               â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Agent Adapter â”‚ â”‚ Agent Adapter â”‚ â”‚ Agent Adapter â”‚         â”‚
â”‚  â”‚  (Claude #1)  â”‚ â”‚  (Claude #2)  â”‚ â”‚   (Codex)     â”‚         â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
â”‚  â”‚ â”‚    PTY    â”‚ â”‚ â”‚ â”‚    PTY    â”‚ â”‚ â”‚ â”‚    PTY    â”‚ â”‚         â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚          â”‚                 â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Claude Code  â”‚  â”‚ Claude Code  â”‚  â”‚    Codex     â”‚
    â”‚  Instance 1  â”‚  â”‚  Instance 2  â”‚  â”‚   (å°†æ¥å¯¾å¿œ)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React + TypeScript + HTML/CSS
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Rust + Tauri
- **é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«**: ACP (Agent Communication Protocol)
- **CLIé€šä¿¡**: PTYï¼ˆç–‘ä¼¼ç«¯æœ«ï¼‰ã§Claude Codeã‚’ä»®æƒ³ç«¯æœ«ä¸Šã§å®Ÿè¡Œ

## ACP (Agent Communication Protocol)

Re-VoiceãŠã‚ˆã³ä»Šå¾Œé–‹ç™ºã™ã‚‹ã™ã¹ã¦ã®AIã‚¢ãƒ—ãƒªã®åŸºç›¤ã¨ãªã‚‹ã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¯¾å¿œã®æ±ç”¨é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚

**2026-02-21æ›´æ–°**: A2A (Agent-to-Agent) Protocolæº–æ‹ åŒ–å®Œäº†

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè­˜åˆ¥å­

```
acp://<agent-id>@<host>/<instance>

ä¾‹:
- acp://claude-code@localhost/main
- acp://codex@192.168.1.100/worker-3
```

### A2A Agent Cardï¼ˆv3ï¼‰

A2A Protocolæº–æ‹ ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã€‚`.well-known/agent.json`ã§ãƒ›ã‚¹ãƒˆå¯èƒ½ã€‚

```typescript
interface AgentCard {
  // A2Aå¿…é ˆ
  name: string;
  url: string;
  version: string;
  protocolVersion: "0.3.0";  // A2Aãƒãƒ¼ã‚¸ãƒ§ãƒ³

  // A2Aã‚ªãƒ—ã‚·ãƒ§ãƒ³
  description?: string;
  provider?: { organization: string; url?: string };
  capabilities?: {
    streaming: boolean;
    pushNotifications: boolean;
    stateTransitionHistory: boolean;
  };
  authentication?: { schemes: string[] };
  defaultInputModes?: string[];
  defaultOutputModes?: string[];
  skills?: Skill[];  // æ—§capabilities

  // å†…éƒ¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  id?: string;
  transport?: TransportType;
}

interface Skill {
  id: string;
  name: string;
  description?: string;
  tags?: string[];
  examples?: string[];
  inputSchema?: JSONSchema;
  outputSchema?: JSONSchema;
}
```

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆv3ï¼‰

```typescript
interface ACPEnvelope {
  protocol: "ACP/3.0";
  message: ACPMessageV3;
  metadata?: EnvelopeMetadata;
}

interface ACPMessageV3 {
  id: string;
  timestamp: string;
  from: AgentAddress;
  to: AddressType;  // single/multiple/broadcast/pipeline
  type: MessageType;
  payload: MessagePayload;
  metadata?: MessageMetadata;
}
```

### A2Aå‚ç…§
- Protocol: https://github.com/google/A2A
- JSON Schema: https://github.com/google/A2A/blob/main/specification/json/a2a.json

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| é …ç›® | æŠ€è¡“ |
|------|------|
| ã‚¢ãƒ—ãƒªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Tauri |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | React + TypeScript |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Rust |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€šä¿¡ | ACP (Agent Communication Protocol) |
| Claude Codeå®Ÿè¡Œ | CLIãƒ¢ãƒ¼ãƒ‰ï¼ˆ`--print --output-format stream-json`ï¼‰ |
| å‹•ç”»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | yt-dlp |
| æ–‡å­—èµ·ã“ã— | YouTubeå­—å¹•ã‚’ä½¿ç”¨ |
| TTS | VOICEVOXï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã€æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼‰ |
| å‹•ç”»åˆæˆ | ffmpeg |

### Claude Codeå®Ÿè¡Œæ–¹å¼ (2026-02-22æ›´æ–°)

**æ—§æ–¹å¼ï¼ˆtmuxãƒ™ãƒ¼ã‚¹ï¼‰:** ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£ã§çŠ¶æ…‹æ¤œå‡º â†’ èª¤æ¤œå‡ºå¤šç™º
**æ–°æ–¹å¼ï¼ˆCLIãƒ™ãƒ¼ã‚¹ï¼‰:** `--print --output-format stream-json` ã§æ§‹é€ åŒ–ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Re-Voice App                          â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ClaudeCodeExecutor                     â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚   å­ãƒ—ãƒ­ã‚»ã‚¹ â†’ JSON Parser â†’ State Manager         â”‚ â”‚
â”‚  â”‚       â†‘           â†“             â†“                  â”‚ â”‚
â”‚  â”‚    stdin      Parsed Events   AgentState          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            Permission Manager                       â”‚ â”‚
â”‚  â”‚   - äº‹å‰è¨±å¯ãƒªã‚¹ãƒˆ (Read/Grep/Globç­‰)               â”‚ â”‚
â”‚  â”‚   - æ›¸ãè¾¼ã¿ç³»ã¯äººé–“ç¢ºèª (Edit/Write/Bashç­‰)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### stream-jsonã‚¤ãƒ™ãƒ³ãƒˆæ§‹é€ 

```json
{"type":"system","subtype":"init","session_id":"...","model":"glm-5"}
{"type":"assistant","message":{"content":[{"type":"text","text":"..."}]}}
{"type":"result","subtype":"success","result":"...","duration_ms":14278}
```

## CLI AI ã®å½¹å‰²

Claude Code ã«ä»¥ä¸‹ã‚’æ‹…å½“ã•ã›ã‚‹ï¼š

1. **ç¿»è¨³** - å­—å¹•ã®æ—¥æœ¬èªç¿»è¨³
2. **å“è³ªå‘ä¸Š** - æ–‡è„ˆèª¿æ•´ãƒ»è‡ªç„¶ãªè¡¨ç¾ã¸ã®ä¿®æ­£
3. **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼** - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã®ç®¡ç†ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```
YouTube URLå…¥åŠ›
    â†“
yt-dlpã§å‹•ç”»+å­—å¹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    â†“
ACPçµŒç”±ã§Claude Codeã«å­—å¹•é€ä¿¡
    â†“
Claude CodeãŒå­—å¹•ã‚’ç¿»è¨³ãƒ»èª¿æ•´
    â†“
VOICEVOXã§æ—¥æœ¬èªéŸ³å£°ç”Ÿæˆ
    â†“
ffmpegã§å‹•ç”»ã¨åˆæˆ
    â†“
ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ä¿å­˜
```

## å‡ºåŠ›å½¢å¼

- **éŸ³å£°ç½®æ›ç‰ˆ** - å…ƒã®éŸ³å£°ã‚’æ—¥æœ¬èªå¹æ›¿ã«ç½®ãæ›ãˆ
- **äºŒé‡éŸ³å£°ç‰ˆ** - å…ƒéŸ³å£°ã‚’æ®‹ã—ã¦æ—¥æœ¬èªã‚’é‡ã­ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠå¯èƒ½

## UIè¦ç´ ï¼ˆMVPï¼‰

- YouTube URLå…¥åŠ›æ¬„
- å¤‰æ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆç½®æ›/äºŒé‡éŸ³å£°ã®é¸æŠã€VOICEVOXã®ã‚­ãƒ£ãƒ©é¸æŠç­‰ï¼‰
- å‡¦ç†ã®é€²è¡ŒçŠ¶æ³è¡¨ç¤º
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼/å†ç”Ÿæ©Ÿèƒ½
- å®Œäº†é€šçŸ¥ãƒ»ä¿å­˜å…ˆæŒ‡å®š
- **ACPã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ‘ãƒãƒ«** - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²ãƒ»æ¤œç´¢ãƒ»ç¿»è¨³ãƒ†ã‚¹ãƒˆ

## å¯¾å¿œCLI AIï¼ˆMVPï¼‰

- Claude Code ã®ã¿

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
re-voice/
â”œâ”€â”€ src/                    # Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ App.tsx             # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ main.tsx            # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ acp/                # ACPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ index.ts        # ACPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ types.ts        # TypeScriptå‹å®šç¾©
â”‚   â”‚   â””â”€â”€ transport/      # ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ assets/             # é™çš„ã‚¢ã‚»ãƒƒãƒˆ
â”œâ”€â”€ src-tauri/              # Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs         # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ lib.rs          # Tauriã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ pty.rs          # PTYãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
â”‚   â”‚   â””â”€â”€ acp/            # ACPãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚       â”œâ”€â”€ mod.rs      # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚       â”œâ”€â”€ message.rs  # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹
â”‚   â”‚       â”œâ”€â”€ agent.rs    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰
â”‚   â”‚       â”œâ”€â”€ registry.rs # ãƒ¬ã‚¸ã‚¹ãƒˆãƒª
â”‚   â”‚       â”œâ”€â”€ adapter.rs  # ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼trait
â”‚   â”‚       â”œâ”€â”€ orchestrator.rs # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”‚       â”œâ”€â”€ adapters/   # ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å®Ÿè£…
â”‚   â”‚       â”‚   â””â”€â”€ claude_code.rs
â”‚   â”‚       â””â”€â”€ transport/  # ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚           â””â”€â”€ pty.rs
â”‚   â”œâ”€â”€ Cargo.toml          # Rustä¾å­˜é–¢ä¿‚
â”‚   â””â”€â”€ tauri.conf.json     # Tauriè¨­å®š
â”œâ”€â”€ package.json            # Node.jsä¾å­˜é–¢ä¿‚
â”œâ”€â”€ CLAUDE.md               # Claude Codeç”¨ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ coding.md               # å®Ÿè£…è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ handover.md             # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè¦ä»¶ãƒ»æ±ºå®šäº‹é …ï¼‰
```

## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ + ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŒæ™‚èµ·å‹•ï¼‰
pnpm tauri dev

# ãƒ“ãƒ«ãƒ‰
pnpm tauri build

# Rustã®ã¿ãƒã‚§ãƒƒã‚¯
cd src-tauri && cargo check

# TypeScriptãƒã‚§ãƒƒã‚¯
npx tsc --noEmit
```

## Tauri IPC ã‚³ãƒãƒ³ãƒ‰

### ãƒ¬ã‚¬ã‚·ãƒ¼PTYã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|---------|------|--------|------|
| `spawn_claude` | - | `Result<String, String>` | Claude Codeã‚’PTYã§èµ·å‹• |
| `send_to_claude` | `message: String` | `Result<(), String>` | Claude Codeã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ |
| `read_from_claude` | - | `Result<String, String>` | Claude Codeã‹ã‚‰å‡ºåŠ›èª­ã¿å–ã‚Š |
| `is_claude_running` | - | `bool` | Claude Codeèµ·å‹•ç¢ºèª |
| `execute_command` | `command: String` | `Result<String, String>` | ãƒ†ã‚¹ãƒˆç”¨: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ |

### ACPã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|---------|------|--------|------|
| `acp_register_agent` | `agentType, instanceId` | `Result<String, String>` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ² |
| `acp_discover_agents` | `capabilities?, tags?, transport?` | `Result<Vec<AgentCard>, String>` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¤œç´¢ |
| `acp_list_agents` | - | `Vec<AgentCard>` | å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§ |
| `acp_get_agent` | `agentId` | `Option<AgentCard>` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå–å¾— |
| `acp_send_message` | `to, content, from` | `Result<String, String>` | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ |
| `acp_broadcast` | `content, capabilities?, from` | `Result<Vec<String>, String>` | ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ |
| `acp_get_task` | `taskId` | `Option<TaskState>` | ã‚¿ã‚¹ã‚¯çŠ¶æ…‹å–å¾— |
| `acp_stats` | - | `OrchestratorStats` | çµ±è¨ˆæƒ…å ± |
| `acp_get_context` | - | `SharedContext` | å…±æœ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ |

### YouTube/å­—å¹•ã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|---------|------|--------|------|
| `get_available_subtitles` | `url: String` | `Result<String, String>` | å­—å¹•ä¸€è¦§å–å¾— |
| `download_subtitles` | `url, lang, outputPath` | `Result<String, String>` | å­—å¹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| `download_auto_subtitles` | `url, lang, outputPath` | `Result<String, String>` | è‡ªå‹•ç”Ÿæˆå­—å¹•DL |

### tmuxã‚³ãƒãƒ³ãƒ‰ (ACP v2)

| ã‚³ãƒãƒ³ãƒ‰ | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|---------|------|--------|------|
| `tmux_create_session` | - | `Result<String, String>` | tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ |
| `tmux_spawn_agent` | `agentId, agentType, capabilities` | `Result<String, String>` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹• |
| `tmux_capture_pane` | `agentId` | `Result<String, String>` | ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£ |
| `tmux_send_message` | `agentId, message` | `Result<(), String>` | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ |
| `tmux_get_status` | `agentId` | `Result<String, String>` | çŠ¶æ…‹å–å¾— |
| `tmux_list_agents` | - | `Result<Vec<Value>, String>` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§ |
| `tmux_destroy_session` | - | `Result<(), String>` | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç ´æ£„ |
| `tmux_start_polling` | `intervalMs?` | `Result<(), String>` | è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°é–‹å§‹ |
| `tmux_stop_polling` | - | `Result<(), String>` | è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°åœæ­¢ |
| `tmux_is_polling` | - | `bool` | ãƒãƒ¼ãƒªãƒ³ã‚°çŠ¶æ…‹ |
| `tmux_answer_question` | `agentId, answer` | `Result<(), String>` | è³ªå•ã«å›ç­”ï¼ˆAskãƒ„ãƒ¼ãƒ«ã¯çŸ¢å°ã‚­ãƒ¼æ“ä½œï¼‰ |
| `tmux_get_agent_status` | `agentId` | `Result<String, String>` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹å–å¾— |

### TmuxOrchestratorå†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------|------|
| `send_keys(pane_id, text)` | ãƒ†ã‚­ã‚¹ãƒˆã‚’é€ä¿¡ï¼ˆ-l ãƒªãƒ†ãƒ©ãƒ«ãƒ¢ãƒ¼ãƒ‰ + Enterï¼‰ |
| `send_key(pane_id, key)` | å˜ä¸€ã‚­ãƒ¼ã‚’é€ä¿¡ï¼ˆDown, Up, Escape, Enterç­‰ï¼‰ |
| `select_option(pane_id, answer)` | Askãƒ„ãƒ¼ãƒ«ã®é¸æŠè‚¢ã‚’é¸æŠï¼ˆçŸ¢å°ã‚­ãƒ¼ã§ç§»å‹•ï¼‰ |

### tmuxã‚¤ãƒ™ãƒ³ãƒˆ (Tauriã‚¤ãƒ™ãƒ³ãƒˆ)

| ã‚¤ãƒ™ãƒ³ãƒˆå | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ | èª¬æ˜ |
|-----------|-----------|------|
| `tmux:status_changed` | `{ agent_id, old_status, new_status }` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹å¤‰åŒ– |
| `tmux:output_ready` | `{ agent_id, content, content_length }` | å‡ºåŠ›æº–å‚™å®Œäº† |
| `tmux:question` | `{ agent_id, question, question_id, context }` | è³ªå•ç™ºç”Ÿï¼ˆLevel 3ï¼‰ |

---

## ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å±¥æ­´

### 2026-02-21 ã‚»ãƒƒã‚·ãƒ§ãƒ³2: ACP v3 & A2Aæº–æ‹ å®Ÿè£… âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **ACP v3 ã‚³ã‚¢ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**
   - ACPEnvelopeå°å…¥ (`message.rs`) - ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³"ACP/3.0"
   - AddressTypeæ‹¡å¼µ - single/multiple/broadcast/pipeline
   - AgentAddressæ§‹é€ ä½“ - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè­˜åˆ¥å­ãƒ‘ãƒ¼ã‚¹

2. **A2A Protocolæº–æ‹ åŒ–** (`agent.rs`, `types.ts`)
   - AgentCardæ§‹é€ ã‚’A2Aä»•æ§˜ã«å¤‰æ›´
   - `capabilities` â†’ `skills` (ã‚¹ã‚­ãƒ«å®šç¾©)
   - æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: `provider`, `authentication`, `protocolVersion`
   - `AgentCapabilities` - streaming, pushNotifications, stateTransitionHistory
   - `Skill`æ§‹é€ ä½“ - id, name, tags, examples, inputSchema, outputSchema

3. **Pipelineå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³** (`pipeline.rs` - æ–°è¦)
   - PipelineDefinition - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®šç¾©
   - PipelineExecution - å®Ÿè¡ŒçŠ¶æ…‹ç®¡ç†
   - PipelineExecutor - ç™»éŒ²/å®Ÿè¡Œ/å®Œäº†/ã‚­ãƒ£ãƒ³ã‚»ãƒ«
   - StageResult - ã‚¹ãƒ†ãƒ¼ã‚¸å˜ä½ã®çµæœ

4. **Broadcastæ©Ÿèƒ½** (`tmux.rs`)
   - discover_agents - CapabilityFilteræ¤œç´¢
   - broadcast_message - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»˜ãä¸€æ–‰é€ä¿¡
   - broadcast_to_idle - ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã¿

5. **æ–°Tauri IPCã‚³ãƒãƒ³ãƒ‰** (`lib.rs`)
   - acp_define_pipeline / acp_execute_pipeline / acp_get_pipeline_status
   - acp_broadcast_v3 / acp_broadcast_to_idle
   - acp_discover_agents_v3 / acp_stats_v3

**A2A Agent Cardä¾‹:**
```json
{
  "name": "Claude Code (main)",
  "url": "acp://claude-code@localhost/main",
  "protocolVersion": "0.3.0",
  "provider": { "organization": "Anthropic" },
  "capabilities": { "streaming": true },
  "skills": [{ "id": "translation", "name": "Translation" }]
}
```

**æ±ºå®šäº‹é …:**

1. **A2Aæº–æ‹ ** - æ¥­ç•Œæ¨™æº–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¸ã®æº–æ‹ ã§ç›¸äº’é‹ç”¨æ€§ç¢ºä¿
2. **å¾Œæ–¹äº’æ›æ€§ç¶­æŒ** - ãƒ¬ã‚¬ã‚·ãƒ¼ACPMessageã¯æ®‹ã—ã€å¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰æä¾›
3. **Pipelineå„ªå…ˆ** - ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æºã¯Pipelineãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…

**å‚ç…§:**
- A2A Protocol: https://github.com/google/A2A
- A2A JSON Schema: https://github.com/google/A2A/blob/main/specification/json/a2a.json

---

### 2026-02-21 ã‚»ãƒƒã‚·ãƒ§ãƒ³: Level 3å‹•ä½œç¢ºèªã¨UIæ”¹å–„ âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **CLAUDECODEç’°å¢ƒå¤‰æ•°å¯¾å¿œ** (`src-tauri/src/acp/tmux.rs:148`)
   - Claude Codeèµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã‚’ `unset CLAUDECODE && claude code` ã«å¤‰æ›´
   - ãƒã‚¹ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆ"Claude Code cannot be launched inside another Claude Code session"ï¼‰ã‚’å›é¿

2. **UTF-8æ–‡å­—å¢ƒç•Œã‚¨ãƒ©ãƒ¼ä¿®æ­£** (`src-tauri/src/acp/tmux.rs:373-376`)
   - `trimmed[1..]` â†’ `trimmed.strip_prefix("â¯")` ã«å¤‰æ›´
   - â¯ ã¯3ãƒã‚¤ãƒˆã®UTF-8æ–‡å­—ã®ãŸã‚ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã§ãƒ‘ãƒ‹ãƒƒã‚¯ã—ã¦ã„ãŸ

3. **å•é¡Œæ–‡è¡¨ç¤ºæ©Ÿèƒ½** (`src-tauri/src/acp/poller.rs:383-414`)
   - `extract_selection_options` ã§æœ€åˆã®é¸æŠè‚¢ã‚ˆã‚Šå‰ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å•é¡Œæ–‡ã¨ã—ã¦æŠ½å‡º
   - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `å•é¡Œæ–‡\n---\n1. é¸æŠè‚¢1\n2. é¸æŠè‚¢2...`

4. **ä½™è¨ˆãªé¸æŠè‚¢ã®é™¤å¤–** (`src-tauri/src/acp/poller.rs`)
   - "Type something.", "Chat about this", "Ask about" ã‚’é™¤å¤–ãƒªã‚¹ãƒˆã«è¿½åŠ 
   - Claude Codeã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¸æŠè‚¢ãŒå«ã¾ã‚Œãªã„ã‚ˆã†ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

5. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤ºæ”¹å–„** (`src/App.tsx:380-430`)
   - `---` ã§åˆ†å‰²ã—ã¦å•é¡Œæ–‡ã¨é¸æŠè‚¢ã‚’åˆ¥ã€…ã«è¡¨ç¤º
   - å•é¡Œæ–‡ã‚¨ãƒªã‚¢ã¨é¸æŠè‚¢ã‚¨ãƒªã‚¢ã‚’åˆ†é›¢

6. **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢å‰Šé™¤** (`src/App.tsx`)
   - è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‹ã‚‰ãƒ‡ãƒãƒƒã‚°ç”¨ã®ã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤ºã€ã‚¨ãƒªã‚¢ã‚’å‰Šé™¤

7. **é¸æŠè‚¢ãƒ­ã‚°å‡ºåŠ›è¿½åŠ ** (`src-tauri/src/acp/tmux.rs:314-317`)
   - select_option ã§å„é¸æŠè‚¢ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ã™ã‚‹ã‚ˆã†è¿½åŠ 

**å‹•ä½œç¢ºèªçµæœ:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| Claude Codeèµ·å‹• | âœ… |
| ã‚¯ã‚¤ã‚ºå•é¡Œæ–‡è¡¨ç¤º | âœ… |
| é¸æŠè‚¢é™¤å¤– | âœ… |
| é¸æŠè‚¢é¸æŠï¼ˆçŸ¢å°ã‚­ãƒ¼æ“ä½œï¼‰ | âœ… |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- Level 4: ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- Phase 2: ç¿»è¨³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ

---

### 2026-02-20 ã‚»ãƒƒã‚·ãƒ§ãƒ³3: Askãƒ„ãƒ¼ãƒ«å›ç­”é€ä¿¡ã®ä¿®æ­£ âœ… å®Œäº†

**å•é¡Œç™ºè¦‹:**

Askãƒ„ãƒ¼ãƒ«ï¼ˆClaude Codeã®é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰ã§å›ç­”ã‚’é€ä¿¡ã—ã¦ã‚‚ã€é¸ã‚“ã é¸æŠè‚¢ã¨ã¯ç•°ãªã‚‹é¸æŠè‚¢ãŒé¸ã°ã‚Œã¦ã„ãŸã€‚

**åŸå› åˆ†æ:**

ãƒ­ã‚°ã‚’èª¿æŸ»ã—ãŸçµæœã€Askãƒ„ãƒ¼ãƒ«ã¯**ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚’å—ã‘ä»˜ã‘ãšã€çŸ¢å°ã‚­ãƒ¼æ“ä½œã§é¸æŠè‚¢ã‚’ç§»å‹•**ã™ã‚‹ã“ã¨ãŒåˆ¤æ˜ï¼š
```
BEFORE:
â¯ 1. å¯Œå£«å±±    â† "â¯" ã¯ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã™
  2. åŒ—å²³       â† é¸æŠã•ã‚Œã¦ã„ãªã„

é€ä¿¡: "åŒ—å²³" + Enter
çµæœ: å¯Œå£«å±±ãŒé¸æŠã•ã‚Œã‚‹ï¼ˆãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã¯ç„¡è¦–ã•ã‚Œã€ç¾åœ¨ã®é¸æŠãŒç¢ºå®šï¼‰
```

**ä¿®æ­£å†…å®¹:**

1. **`select_option` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ** (`src-tauri/src/acp/tmux.rs:303-359`)
   - ç¾åœ¨ã®ç”»é¢ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦é¸æŠè‚¢ä¸€è¦§ã‚’è§£æ
   - "â¯" ãŒã¤ã„ã¦ã„ã‚‹é¸æŠè‚¢ã‚’æ¢ã—ã¦ç¾åœ¨ã®ä½ç½®ã‚’ç‰¹å®š
   - ç›®çš„ã®é¸æŠè‚¢ã¾ã§çŸ¢å°ã‚­ãƒ¼ï¼ˆâ†“ï¼‰ã‚’å¿…è¦å›æ•°é€ä¿¡
   - Enter ã§ç¢ºå®š
   - ä¸Šã«æˆ»ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ Esc ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã¦ã‹ã‚‰å†é¸æŠ

2. **`send_key` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ** (`src-tauri/src/acp/tmux.rs:395-411`)
   - å˜ä¸€ã‚­ãƒ¼ï¼ˆDown, Up, Escape, Enter ãªã©ï¼‰ã‚’é€ä¿¡

3. **ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°è¿½åŠ ** (`src-tauri/src/acp/tmux.rs:420-460`)
   - `extract_option_number` - "1. Option" å½¢å¼ã‹ã‚‰ç•ªå·ã‚’æŠ½å‡º
   - `clean_option_text` - å…ˆé ­ã®è¨˜å·ï¼ˆâ¯, >, â—‹ç­‰ï¼‰ã‚’é™¤å»

4. **`tmux_answer_question` ä¿®æ­£** (`src-tauri/src/lib.rs:617-642`)
   - `send_keys` â†’ `select_option` ã«å¤‰æ›´

**å‹•ä½œãƒ•ãƒ­ãƒ¼ï¼ˆä¿®æ­£å¾Œï¼‰:**

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒåŒ—å²³ã€ã‚’é¸æŠ
   â†“
2. capture_pane_plain ã§ç”»é¢ã‚’å–å¾—
   â†“
3. "â¯ 1. å¯Œå£«å±±" â†’ ç¾åœ¨ä½ç½® = 0
   "  2. åŒ—å²³"   â†’ ç›®çš„ä½ç½® = 1
   â†“
4. â†“ ã‚­ãƒ¼ã‚’1å›é€ä¿¡
   â†“
5. Enter ã‚­ãƒ¼ã§ç¢ºå®š
   â†“
6. åŒ—å²³ãŒæ­£ã—ãé¸æŠã•ã‚Œã‚‹
```

**å‹•ä½œç¢ºèª:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| Rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| select_option å®Ÿè£… | âœ… |
| ã‚¢ãƒ—ãƒªã§ã®å‹•ä½œç¢ºèª | è¦ç¢ºèª |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§é¸æŠè‚¢é¸æŠã®å‹•ä½œç¢ºèª
- Level 4: ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

---

### 2026-02-20 ã‚»ãƒƒã‚·ãƒ§ãƒ³2: è³ªå•å†…å®¹æŠ½å‡ºã®æ”¹å–„ã¨ContextåŠ¹ç‡åŒ– âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **MEMORY.mdä½œæˆ** - ContextåŠ¹ç‡åŒ–
   - handover.mdã®è¦ç‚¹ã‚’ç´„60è¡Œã«åœ§ç¸®
   - Explore Agentæ´»ç”¨ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ 
   - ãƒˆãƒ”ãƒƒã‚¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: `debugging.md`, `api.md`

2. **è³ªå•å†…å®¹æŠ½å‡ºæ”¹å–„** (`src-tauri/src/acp/poller.rs`)
   - `extract_selection_options` é–¢æ•°è¿½åŠ 
   - é¸æŠè‚¢ï¼ˆ"1. Option A" å½¢å¼ï¼‰ã‚’æŠ½å‡ºã—ã¦çµåˆ
   - "Select an option" å›ºå®š â†’ å®Ÿéš›ã®é¸æŠè‚¢ã‚’è¡¨ç¤º

3. **å›ç­”é€ä¿¡æ©Ÿèƒ½ç¢ºèª**
   - `tmux_answer_question` ã¯æ­£å¸¸å‹•ä½œ
   - `send_keys` ãŒEnter ã‚­ãƒ¼ã‚‚é€ä¿¡ã™ã‚‹ã“ã¨ã‚’ç¢ºèªæ¸ˆã¿

**å‹•ä½œç¢ºèªçµæœ:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| Rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | âœ… |
| è³ªå•å†…å®¹æŠ½å‡º | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆè¦å‹•ä½œç¢ºèªï¼‰ |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å†…å®¹ã‚’ç¢ºèª
- Level 4: ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

---

### 2026-02-20 ã‚»ãƒƒã‚·ãƒ§ãƒ³: Level 3 è³ªå•å‡¦ç†ã®æ”¹å–„ã¨å‹•ä½œç¢ºèª âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **è³ªå•æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯æ”¹å–„** (`src-tauri/src/acp/parser.rs`)
   - `extract_question` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
   - è³ªå•ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã—ãŸè¡Œã‚’æ¢ã™ã‚ˆã†ã«æ”¹å–„
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ç©ºã§ãªã„æœ€å¾Œã®è¡Œã‚’è¿”ã™

2. **tmuxã‚­ãƒ£ãƒ—ãƒãƒ£ç¯„å›²æ‹¡å¤§** (`src-tauri/src/acp/tmux.rs`)
   - `capture_pane_plain` ã« `-S -100` ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰æœ€å¤§100è¡Œå–å¾—

3. **é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œå‡º** (`src-tauri/src/acp/poller.rs`)
   - `content.contains("Enter to select")` ã§é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ¤œå‡º
   - é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ `WaitingForInput` ã¨ã—ã¦å¼·åˆ¶åˆ¤å®š
   - â€» parser.rsã§ã®åˆ¤å®šãŒã†ã¾ãå‹•ä½œã—ãªã‹ã£ãŸãŸã‚ã€poller.rsã§ç›´æ¥ãƒã‚§ãƒƒã‚¯

4. **è³ªå•ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ ** (`src-tauri/src/acp/parser.rs`)
   - `Enter to select` ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ 
   - `â†‘/â†“ to navigate` ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ 

**å‹•ä½œç¢ºèªçµæœ:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| Rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œå‡º | âœ… |
| WaitingForInputçŠ¶æ…‹é·ç§» | âœ… |
| è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º | âœ… |
| å›ç­”é€ä¿¡ | è¦ç¢ºèª |

**Claude Codeã§é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã•ã›ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹:**
```
3æŠã‚¯ã‚¤ã‚ºã‚’å‡ºã—ã¦ã€Askãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å›ç­”ã‚’æ±‚ã‚ã¦ãã ã•ã„
```

**ç™ºè¦‹ã—ãŸèª²é¡Œ:**

1. **parser.rsã®åˆ¤å®šãŒåæ˜ ã•ã‚Œãªã„å•é¡Œ**
   - `is_processing` ã§é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ¤œå‡ºã—ã¦ `return false` ã—ã¦ã‚‚ã€çŠ¶æ…‹ãŒ `Processing` ã®ã¾ã¾ã«ãªã‚‹
   - åŸå› ä¸æ˜ï¼ˆTauriã®ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã®å•é¡Œï¼Ÿï¼‰
   - å›é¿ç­–: poller.rs ã§ç›´æ¥é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯

2. **Tauriã®Rustã‚³ãƒ¼ãƒ‰å¤‰æ›´ã®åæ˜ **
   - `pnpm tauri dev` ã§Rustã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã‚‚å³åº§ã«åæ˜ ã•ã‚Œãªã„å ´åˆãŒã‚ã‚‹
   - `cargo clean` + `cargo build` ã§å†ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- å›ç­”é€ä¿¡æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
- Level 4: ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆè¤‡æ•°ãƒšã‚¤ãƒ³ç®¡ç†ï¼‰

---

### 2026-02-19 ã‚»ãƒƒã‚·ãƒ§ãƒ³: Level 3 è³ªå•å‡¦ç†å®Ÿè£… âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **QuestionPayloadå‹å®šç¾©** (`src-tauri/src/acp/poller.rs`)
   - `agent_id` - è³ªå•å…ƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆID
   - `question` - è³ªå•å†…å®¹
   - `question_id` - è³ªå•ã®ä¸€æ„è­˜åˆ¥å­
   - `context` - ç›´å‰ã®å‡ºåŠ›ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

2. **tmux:questionã‚¤ãƒ™ãƒ³ãƒˆå®Ÿè£…** (`src-tauri/src/acp/poller.rs`)
   - `WaitingForInput`çŠ¶æ…‹ã«å¤‰åŒ–ã—ãŸéš›ã«è‡ªå‹•ç™ºç«
   - é‡è¤‡é˜²æ­¢: å‰å›ã‚‚`WaitingForInput`ã ã£ãŸå ´åˆã¯ç™ºç«ã—ãªã„

3. **è³ªå•å›ç­”ã‚³ãƒãƒ³ãƒ‰è¿½åŠ ** (`src-tauri/src/lib.rs`)
   - `tmux_answer_question` - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å›ç­”ã‚’é€ä¿¡
   - `tmux_get_agent_status` - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç¾åœ¨ã®çŠ¶æ…‹ã‚’å–å¾—

4. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°** (`src/App.tsx`)
   - `tmux:question`ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
   - è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°UIå®Ÿè£…
     - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆIDè¡¨ç¤º
     - è³ªå•å†…å®¹è¡¨ç¤ºï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆä»˜ãï¼‰
     - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºï¼ˆæŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ï¼‰
     - å›ç­”å…¥åŠ›æ¬„ã¨é€ä¿¡ãƒœã‚¿ãƒ³

5. **CSSã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ ** (`src/App.css`)
   - è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
   - ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
   - ãƒãƒ¼ãƒªãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

**å‹•ä½œãƒ•ãƒ­ãƒ¼:**

```
1. Claude CodeãŒè³ªå•ã‚’è¡¨ç¤º
   â†“
2. StatusPollerãŒWaitingForInputã‚’æ¤œå‡º
   â†“
3. tmux:questionã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
   â†“
4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
   â†“
5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå›ç­”ã‚’å…¥åŠ›
   â†“
6. tmux_answer_questionã‚³ãƒãƒ³ãƒ‰ã§å›ç­”é€ä¿¡
   â†“
7. Claude CodeãŒå›ç­”ã‚’å—ä¿¡ã—ã¦å‡¦ç†ç¶™ç¶š
```

**å‹•ä½œç¢ºèª:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| Rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| è³ªå•ã‚¤ãƒ™ãƒ³ãƒˆç™ºç« | è¦ç¢ºèª |
| å›ç­”é€ä¿¡ | è¦ç¢ºèª |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- Level 4: ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆè¤‡æ•°ãƒšã‚¤ãƒ³ç®¡ç†ï¼‰
- Level 5: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ï¼ˆSharedContextã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼‰

---

### 2025-02-19 ã‚»ãƒƒã‚·ãƒ§ãƒ³2: çŠ¶æ…‹æ¤œçŸ¥ã¨è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°å®Ÿè£… âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **OutputParserå®Ÿè£…** (`src-tauri/src/acp/parser.rs`)
   - å‡¦ç†ä¸­ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: `Thinking`, `Processing`, `Working`, ã‚¹ãƒ”ãƒŠãƒ¼æ–‡å­—
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: `>`, `â¯`
   - è³ªå•ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: `?`, `ï¼Ÿ`, ç–‘å•èªã€é¸æŠè‚¢æç¤º
   - ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: `Error:`, `Failed:`, `Exception:` ç­‰
   - ANSIã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹é™¤å»
   - æ„å‘³ã®ã‚ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æŠ½å‡º

2. **StatusPollerå®Ÿè£…** (`src-tauri/src/acp/poller.rs`)
   - 500msé–“éš”ã§ã®è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°ï¼ˆè¨­å®šå¤‰æ›´å¯èƒ½ï¼‰
   - çŠ¶æ…‹å¤‰åŒ–æ™‚ã®Tauriã‚¤ãƒ™ãƒ³ãƒˆç™ºç«:
     - `tmux:status_changed` - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çŠ¶æ…‹ãŒå¤‰åŒ–
     - `tmux:output_ready` - å‡ºåŠ›ã®æº–å‚™å®Œäº†ï¼ˆIdle/WaitingForInputæ™‚ï¼‰
   - ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ™ãƒ¼ã‚¹ã®å¤‰åŒ–æ¤œå‡º

3. **Tauriã‚³ãƒãƒ³ãƒ‰è¿½åŠ ** (`src-tauri/src/lib.rs`)
   - `tmux_start_polling` - è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°é–‹å§‹
   - `tmux_stop_polling` - è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°åœæ­¢
   - `tmux_is_polling` - ãƒãƒ¼ãƒªãƒ³ã‚°çŠ¶æ…‹å–å¾—

4. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆå¯¾å¿œ** (`src/App.tsx`)
   - `tmux:status_changed` ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
   - `tmux:output_ready` ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
   - æ‰‹å‹•ãƒãƒ¼ãƒªãƒ³ã‚°ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã¸ã®ç§»è¡Œ

**ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã®æ›´æ–°:**

```
src-tauri/src/acp/
â”œâ”€â”€ mod.rs           # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©ï¼ˆparser, pollerã‚’è¿½åŠ ï¼‰
â”œâ”€â”€ parser.rs        # NEW: å‡ºåŠ›ãƒ‘ãƒ¼ã‚µãƒ¼ï¼ˆçŠ¶æ…‹æ¤œçŸ¥ï¼‰
â”œâ”€â”€ poller.rs        # NEW: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ãƒ©ãƒ¼
â”œâ”€â”€ tmux.rs          # TmuxOrchestratorï¼ˆOutputParserçµ±åˆï¼‰
â””â”€â”€ ...              # ãã®ä»–æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«
```

**å‹•ä½œç¢ºèª:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| Rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| ã‚¤ãƒ™ãƒ³ãƒˆç™ºç« | è¦ç¢ºèª |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:**
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ã®å®Ÿè£…
- å®Ÿéš›ã®ç¿»è¨³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®çµ±åˆ

---

### 2025-02-19 ã‚»ãƒƒã‚·ãƒ§ãƒ³1: ACP v2æŠ€è¡“ãƒªã‚¹ã‚¯æ¤œè¨¼ âœ… å®Œäº†

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **æŠ€è¡“ãƒªã‚¹ã‚¯æ¤œè¨¼ (Level 0.5)** - ã™ã¹ã¦æˆåŠŸ
   - âœ… tmux capture-pane ã§å‡ºåŠ›å–å¾—
   - âœ… tmux send-keys -l ã§æ—¥æœ¬èªé€ä¿¡
   - âœ… ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¤œçŸ¥ãƒ‘ã‚¿ãƒ¼ãƒ³ (â¯, > )
   - âœ… Claude Codeèµ·å‹•ãƒ»æ“ä½œ

2. **TmuxOrchestratorå®Ÿè£…** (`src-tauri/src/acp/tmux.rs`)
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ/ç ´æ£„
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹• (Claude Code, Codex, GenericShell)
   - ãƒšã‚¤ãƒ³ã‚­ãƒ£ãƒ—ãƒãƒ£ (ANSIä»˜ã/ãªã—)
   - çŠ¶æ…‹æ¤œçŸ¥ (Processing, Idle, WaitingForInput, Error)
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ (ãƒªãƒ†ãƒ©ãƒ«ãƒ¢ãƒ¼ãƒ‰ä½¿ç”¨)

3. **Tauriã‚³ãƒãƒ³ãƒ‰è¿½åŠ ** (`src-tauri/src/lib.rs`)
   - tmux_create_session
   - tmux_spawn_agent
   - tmux_capture_pane
   - tmux_send_message
   - tmux_get_status
   - tmux_list_agents
   - tmux_destroy_session

4. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UI** (`src/App.tsx`)
   - TmuxTestSectionã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ/ç ´æ£„
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé¸æŠ
   - ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£è¡¨ç¤º
   - ãƒãƒ¼ãƒªãƒ³ã‚°æ©Ÿèƒ½

**æ¤œè¨¼çµæœ:**

| ãƒ†ã‚¹ãƒˆé …ç›® | çµæœ |
|-----------|------|
| tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ | âœ… æˆåŠŸ |
| Claude Codeèµ·å‹• | âœ… æˆåŠŸ |
| ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£ | âœ… æˆåŠŸ |
| æ—¥æœ¬èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ | âœ… æˆåŠŸ |
| å¿œç­”å–å¾— | âœ… æˆåŠŸ |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— (Level 1):**
- çŠ¶æ…‹æ¤œçŸ¥ã®ç²¾åº¦å‘ä¸Š
- è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°ã¨ã‚¤ãƒ™ãƒ³ãƒˆé€šçŸ¥
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ã®å®Ÿè£…

---

### 2025-02-18 ã‚»ãƒƒã‚·ãƒ§ãƒ³2: ACPå®Ÿè£…

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **ACPãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹** (`src-tauri/src/acp/message.rs`)
   - `ACPMessage` - ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
   - `ACPFrame` - PTYãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆç”¨ãƒ•ãƒ¬ãƒ¼ãƒŸãƒ³ã‚°
   - 6ç¨®é¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ— (prompt, response, broadcast, discover, advertise, error)

2. **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹** (`src-tauri/src/acp/agent.rs`)
   - `AgentCard` - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè­˜åˆ¥æƒ…å ±
   - `Capability` - èƒ½åŠ›å®£è¨€
   - `DiscoveryQuery` - æ¤œç´¢ã‚¯ã‚¨ãƒª

3. **ãƒ¬ã‚¸ã‚¹ãƒˆãƒª** (`src-tauri/src/acp/registry.rs`)
   - ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²
   - ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆè¿½è·¡
   - å¤ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

4. **ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼** (`src-tauri/src/acp/adapter.rs`)
   - `AgentAdapter` trait - ãƒ—ãƒ­ãƒˆã‚³ãƒ«å¤‰æ›
   - `InputConverter` / `OutputConverter` traits
   - `SharedContext` - ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰

5. **Claude Codeã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼** (`src-tauri/src/acp/adapters/claude_code.rs`)
   - PTYãƒ™ãƒ¼ã‚¹é€šä¿¡
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåŸ‹ã‚è¾¼ã¿
   - ANSIé™¤å»ãƒ»å‡ºåŠ›ãƒ‘ãƒ¼ã‚¹ï¼ˆç°¡æ˜“ï¼‰

6. **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼** (`src-tauri/src/acp/orchestrator.rs`)
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†ï¼ˆç°¡æ˜“ç‰ˆï¼‰
   - ã‚¿ã‚¹ã‚¯çŠ¶æ…‹è¿½è·¡
   - çµ±è¨ˆæƒ…å ±

7. **TypeScript ACPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ** (`src/acp/`)
   - å‹å®šç¾©
   - ACPClient ã‚¯ãƒ©ã‚¹
   - Tauri IPCãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ

8. **UIçµ±åˆ**
   - ACPã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ‘ãƒãƒ«
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²ãƒ»æ¤œç´¢
   - ç¿»è¨³ãƒ†ã‚¹ãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

**å‹•ä½œç¢ºèªæ¸ˆã¿æ©Ÿèƒ½:**

| æ©Ÿèƒ½ | çŠ¶æ…‹ |
|------|------|
| Rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ« | âœ… |
| ACPã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ² | âœ… UIå®Ÿè£…æ¸ˆã¿ |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¤œç´¢ | âœ… UIå®Ÿè£…æ¸ˆã¿ |
| ç¿»è¨³ãƒ†ã‚¹ãƒˆUI | âœ… å®Ÿè£…æ¸ˆã¿ |

**æœªå®Ÿè£…ãƒ»ç°¡æ˜“å®Ÿè£…:**

- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆã‚¿ã‚¹ã‚¯ã®å®Ÿéš›ã®å®Ÿè¡Œï¼‰
- [ ] PTYã®éåŒæœŸèª­ã¿å–ã‚Š
- [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆç¾åœ¨ã¯PTYè»¢é€ã®ã¿ï¼‰
- [ ] å‡ºåŠ›ãƒ‘ãƒ¼ã‚µãƒ¼ã®å®Œå…¨å®Ÿè£…
- [ ] WebSocketãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ
- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™ºè¦‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆèªè¨¼ãƒ»æš—å·åŒ–ï¼‰

**æŠ€è¡“çš„èª²é¡Œ:**

- `portable-pty`ãŒ`Send + Sync`ã‚’å®Ÿè£…ã—ã¦ã„ãªã„ãŸã‚ã€ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿å­˜ã§ããªã„
- ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ç¾åœ¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã®ã¿ç®¡ç†

---

### 2025-02-18 ã‚»ãƒƒã‚·ãƒ§ãƒ³1

**å®Œäº†ã—ãŸä½œæ¥­:**

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–**
   - Tauri + React + TypeScript ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   - Rust ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆrustupä½¿ç”¨ï¼‰
   - ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†

2. **PTYé€šä¿¡æ©Ÿèƒ½**
   - `portable-pty` ã‚¯ãƒ¬ãƒ¼ãƒˆã§ä»®æƒ³ç«¯æœ«å®Ÿè£…
   - Claude Codeèµ·å‹•ã‚³ãƒãƒ³ãƒ‰è¿½åŠ 
   - PTYçµŒç”±ã§ã®ã‚³ãƒãƒ³ãƒ‰é€å—ä¿¡æ©Ÿèƒ½

3. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºæœ¬UI**
   - YouTube URLå…¥åŠ›æ¬„
   - Claude Codeèµ·å‹•ãƒœã‚¿ãƒ³
   - ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰ãƒœã‚¿ãƒ³
   - ãƒ­ã‚°è¡¨ç¤ºã‚¨ãƒªã‚¢
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆClaude Codeèµ·å‹•çŠ¶æ…‹ï¼‰

4. **å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ç¢ºèªãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   - yt-dlp ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆHomebrewï¼‰
   - ffmpeg ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆHomebrewï¼‰
   - VOICEVOX å‹•ä½œç¢ºèªï¼ˆAPI: localhost:50021ï¼‰

5. **å­—å¹•æ©Ÿèƒ½å®Ÿè£…**
   - å­—å¹•ä¸€è¦§å–å¾—
   - å­—å¹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆæ‰‹å‹•/è‡ªå‹•ç”Ÿæˆï¼‰
   - è¨€èªé¸æŠUIï¼ˆ10è¨€èªå¯¾å¿œï¼‰

6. **GitHubå…¬é–‹**
   - ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ: https://github.com/npgaid4/re-voice
   - åˆæœŸã‚³ãƒŸãƒƒãƒˆ & ãƒ—ãƒƒã‚·ãƒ¥å®Œäº†

**å‹•ä½œç¢ºèªæ¸ˆã¿æ©Ÿèƒ½:**

| æ©Ÿèƒ½ | çŠ¶æ…‹ |
|------|------|
| ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ | âœ… |
| YouTubeå‹•ç”»æƒ…å ±å–å¾— | âœ… |
| Claude Codeèµ·å‹• (PTY) | âœ… |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º | âœ… |
| å­—å¹•ä¸€è¦§å–å¾— | âœ… |
| å­—å¹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | âœ… |
| yt-dlp | âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ |
| ffmpeg | âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ |
| VOICEVOX | âœ… å‹•ä½œç¢ºèªæ¸ˆã¿ |

---

## ä¸æ˜ç‚¹ãƒ»æ¤œè¨äº‹é …

1. **Claude Codeé€šä¿¡** âœ… è§£æ±ºæ¸ˆã¿
   - âœ… PTYçµŒç”±ã§Claude Codeã®TUIå‡ºåŠ›ã‚’æ­£ã—ããƒ‘ãƒ¼ã‚¹ã§ãã‚‹ï¼ˆOutputParserå®Ÿè£…ï¼‰
   - âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‡ºåŠ›ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ï¼ˆStatusPollerã§ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ï¼‰
   - âœ… Claude Codeã®å¿œç­”å®Œäº†ã‚’ã©ã†æ¤œçŸ¥ã™ã‚‹ã‹ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¤œçŸ¥ï¼‰
   - âœ… è³ªå•ã®æ¤œçŸ¥ã¨å›ç­”é€ä¿¡ï¼ˆLevel 3å®Ÿè£…å®Œäº†ï¼‰
   - âš ï¸ ã‚¹ãƒ”ãƒŠãƒ¼æ¤œå‡ºã®ç²¾åº¦å‘ä¸ŠãŒå¿…è¦ï¼ˆClaude Codeå›ºæœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

2. **Claude Codeã®é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œå‡º** âœ… è§£æ±ºæ¸ˆã¿
   - âœ… "Enter to select" æ–‡å­—åˆ—ã§æ¤œå‡º
   - âš ï¸ parser.rsã§ã®æ¤œå‡ºãŒã†ã¾ãå‹•ä½œã—ãªã„ï¼ˆåŸå› ä¸æ˜ï¼‰
   - å›é¿ç­–: poller.rs ã§ç›´æ¥ `content.contains()` ã‚’ãƒã‚§ãƒƒã‚¯

2b. **Askãƒ„ãƒ¼ãƒ«ã®å…¥åŠ›æ–¹æ³•** âœ… è§£æ±ºæ¸ˆã¿ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³3ï¼‰
   - âœ… Askãƒ„ãƒ¼ãƒ«ã¯**ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚’å—ã‘ä»˜ã‘ãªã„**
   - âœ… çŸ¢å°ã‚­ãƒ¼ï¼ˆâ†‘/â†“ï¼‰ã§é¸æŠè‚¢ã‚’ç§»å‹•ã—ã€Enterã§ç¢ºå®šã™ã‚‹ä»•çµ„ã¿
   - âœ… ç¾åœ¨ã®é¸æŠä½ç½®ã¯ "â¯" è¨˜å·ã§ç¤ºã•ã‚Œã‚‹
   - è§£æ±ºç­–: `select_option` ãƒ¡ã‚½ãƒƒãƒ‰ã§çŸ¢å°ã‚­ãƒ¼æ“ä½œã‚’ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ

3. **å­—å¹•ç¿»è¨³**
   - å­—å¹•ã‚’ã©ã†ã‚„ã£ã¦Claude Codeã«é€ã‚‹ã‹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«çµŒç”±ï¼Ÿç›´æ¥ãƒ†ã‚­ã‚¹ãƒˆï¼Ÿï¼‰
   - ç¿»è¨³çµæœã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆVTTå½¢å¼ã‚’ç¶­æŒã™ã‚‹ã‹ï¼‰
   - é•·ã„å­—å¹•ã®å ´åˆã®åˆ†å‰²æ–¹æ³•

4. **éŸ³å£°åˆæˆ**
   - å­—å¹•ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨éŸ³å£°ã®åŒæœŸæ–¹æ³•
   - è©±é€Ÿã®èª¿æ•´ï¼ˆå­—å¹•ã®è¡¨ç¤ºæ™‚é–“ã«åˆã‚ã›ã‚‹ï¼‰
   - è¤‡æ•°è©±è€…ã¸ã®å¯¾å¿œ

5. **å‹•ç”»åˆæˆ**
   - éŸ³å£°ç½®æ›ç‰ˆã¨äºŒé‡éŸ³å£°ç‰ˆã®å®Ÿè£…è©³ç´°
   - å‡¦ç†ã®é€²æ—è¡¨ç¤ºæ–¹æ³•

6. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - å„æ®µéšã§ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºæ–¹æ³•

7. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - é•·æ™‚é–“å‹•ç”»ã®å‡¦ç†æ™‚é–“
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

8. **ACPé–¢é€£** âœ… tmuxã§è§£æ±º
   - âœ… `portable-pty`ã®`Send + Sync`å•é¡Œ â†’ tmuxä½¿ç”¨ã§å›é¿
   - âš ï¸ ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿéš›ã®ä¸¦åˆ—å®Ÿè¡Œï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡æœªå®Ÿè£…ï¼‰

9. **Taurié–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹**
   - Rustã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œã€`pnpm tauri dev` ã§å³åº§ã«åæ˜ ã•ã‚Œãªã„å ´åˆãŒã‚ã‚‹
   - `cargo clean` + `cargo build` ã§å†ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹
   - `eprintln!` ã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å‡ºåŠ›ã•ã‚Œã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯å…¥ã‚‰ãªã„

---

## æœªå®Ÿè£…æ©Ÿèƒ½

### ACP v3 / A2Aé–¢é€£

- [x] ACPEnvelope - âœ… å®Ÿè£…æ¸ˆã¿
- [x] AddressTypeæ‹¡å¼µ (single/multiple/broadcast/pipeline) - âœ… å®Ÿè£…æ¸ˆã¿
- [x] A2A Agent Cardæº–æ‹  - âœ… å®Ÿè£…æ¸ˆã¿
- [x] Pipelineå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ - âœ… å®Ÿè£…æ¸ˆã¿
- [x] Broadcastæ©Ÿèƒ½ - âœ… å®Ÿè£…æ¸ˆã¿
- [ ] Pipeline UI - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®šç¾©ãƒ»å®Ÿè¡ŒUI
- [ ] WebSocketãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ - ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¯¾å¿œ
- [ ] A2Aå®Œå…¨æº–æ‹  - HTTP/SSEé€šä¿¡ã€/.well-known/agent.json

### ACPã‚³ã‚¢æ©Ÿèƒ½
- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆã‚¿ã‚¹ã‚¯ã®å®Ÿéš›ã®å®Ÿè¡Œï¼‰
- [ ] PTYã®éåŒæœŸèª­ã¿å–ã‚Šï¼ˆç¾åœ¨ã¯ãƒãƒ¼ãƒªãƒ³ã‚°æ–¹å¼ï¼‰
- [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆç¾åœ¨ã¯PTYè»¢é€ã®ã¿ï¼‰
- [ ] å‡ºåŠ›ãƒ‘ãƒ¼ã‚µãƒ¼ã®å®Œå…¨å®Ÿè£…
- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™ºè¦‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆèªè¨¼ãƒ»æš—å·åŒ–ï¼‰

### Level 6ï¼ˆè‡ªå‹•åŒ–ï¼‰
- [ ] TaskRouterï¼ˆã‚·ãƒ³ãƒ—ãƒ«/è¤‡é›‘ã‚¿ã‚¹ã‚¯åˆ¤å®šï¼‰
- [ ] QuestionClassifierï¼ˆAI/äººé–“åˆ¤å®šï¼‰
- [ ] Orchestrator Agentï¼ˆã¾ã¨ã‚å½¹AIï¼‰

### Level 7ï¼ˆå®‰å®šåŒ–ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼åˆ†é¡ã¨ãƒªã‚«ãƒãƒªãƒ¼
- [ ] ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç›£è¦–
- [ ] ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### å®Œäº†æ¸ˆã¿

| Level | å†…å®¹ | çŠ¶æ…‹ | å‚™è€ƒ |
|-------|------|------|------|
| Level 0 | tmuxåŸºæœ¬æ©Ÿèƒ½ | âœ… å®Œäº† | |
| Level 0.5 | æŠ€è¡“ãƒªã‚¹ã‚¯æ¤œè¨¼ | âœ… å®Œäº† | |
| Level 1 | çŠ¶æ…‹æ¤œçŸ¥ï¼ˆOutputParserï¼‰ | âœ… å®Œäº† | |
| Level 2 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æº | âœ… å®Œäº† | |
| Level 3 | è³ªå•å‡¦ç†ï¼ˆMVPï¼‰ | âœ… å®Œäº† | å•é¡Œæ–‡è¡¨ç¤ºãƒ»é¸æŠè‚¢é™¤å¤–å«ã‚€å®Œå…¨å®Ÿè£… |
| Level 4 | ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŸºç›¤ | âœ… å®Œäº† | ACP v3 + A2Aæº–æ‹  (2026-02-21) |
| Level 5 | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ | ğŸŸ¡ éƒ¨åˆ† | Pipeline/Broadcastå®Ÿè£…æ¸ˆã¿ã€UIæœªå®Ÿè£… |

### æ¬¡æœŸå®Ÿè£…

| Level | å†…å®¹ | çŠ¶æ…‹ | èª¬æ˜ |
|-------|------|------|------|
| Level 5æ®‹ | Pipeline UI | ğŸ”´ æœªå®Ÿè£… | ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®šç¾©ãƒ»å®Ÿè¡ŒUI |
| Level 6 | è‡ªå‹•åŒ– | ğŸ”´ æœªå®Ÿè£… | TaskRouterã€QuestionClassifier |
| Level 7 | å®‰å®šåŒ– | ğŸ”´ æœªå®Ÿè£… | ã‚¨ãƒ©ãƒ¼å‡¦ç†ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒªã‚½ãƒ¼ã‚¹ç®¡ç† |

### Phase 2: Re-Voiceçµ±åˆ
- [ ] å­—å¹•ç¿»è¨³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- [ ] VOICEVOXé€£æº
- [ ] ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰å‹•ä½œ

### Phase 3: æ‹¡å¼µ
- [ ] ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¿»è¨³
- [ ] WebSocketãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ
- [ ] ä»–ã®CLI AIãƒ„ãƒ¼ãƒ«å¯¾å¿œï¼ˆCodexã€Gemini CLIç­‰ï¼‰

---

## ç¾åœ¨ã®MVPå®šç¾©

**Level 3å®Œäº†æ™‚ç‚¹ã§MVPé”æˆ** âœ… å‹•ä½œç¢ºèªæ¸ˆã¿

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤
- YouTube URLã‚’å…¥åŠ›ã—ã¦å­—å¹•ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- Claude Codeã«ç¿»è¨³ã‚’ä¾é ¼
- Claude Codeã‹ã‚‰ã®è³ªå•ã«å›ç­”
- ç¿»è¨³çµæœã‚’å–å¾—

ã“ã‚Œã§ã€Œç¿»è¨³ã®ãŸã‚ã«äººé–“ãŒClaude Codeã‚’æ“ä½œã™ã‚‹ã€ã®ã§ã¯ãªãã€
ã€Œã‚¢ãƒ—ãƒªçµŒç”±ã§ç¿»è¨³ã‚’ä¾é ¼ã§ãã‚‹ã€ã¨ã„ã†æœ€å°é™ã®ä¾¡å€¤ãŒæä¾›ã§ãã‚‹ã€‚

### å‹•ä½œç¢ºèªæ–¹æ³•

1. `pnpm tauri dev` ã§ã‚¢ãƒ—ãƒªèµ·å‹•
2. tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
3. Claude Codeèµ·å‹•
4. è‡ªå‹•ãƒãƒ¼ãƒªãƒ³ã‚°é–‹å§‹
5. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡: `3æŠã‚¯ã‚¤ã‚ºã‚’å‡ºã—ã¦ã€Askãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å›ç­”ã‚’æ±‚ã‚ã¦ãã ã•ã„`
6. é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—

---

## ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å ´æ‰€

```
src-tauri/logs/
â”œâ”€â”€ current.log          # ç¾åœ¨ã®ãƒ­ã‚°
â””â”€â”€ archive/
    â””â”€â”€ YYYYMMDD_HHMMSS.log  # ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
```

ãƒ­ã‚°ã¯ç›¸å¯¾ãƒ‘ã‚¹ `logs/` ã«å‡ºåŠ›ã•ã‚Œã‚‹ï¼ˆä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ `src-tauri/`ï¼‰ã€‚

---

## ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ

### tmuxé–¢é€£
```bash
tmux list-sessions                    # ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§
tmux capture-pane -t re-voice -p      # ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£
tmux list-panes -t re-voice -F "#{pane_id}"  # ãƒšã‚¤ãƒ³IDç¢ºèª
```

### ãƒ­ã‚°ç¢ºèª
```bash
tail -f src-tauri/logs/current.log
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª
ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªï¼š
- `tmux:status_changed` - çŠ¶æ…‹å¤‰åŒ–
- `tmux:output_ready` - å‡ºåŠ›å®Œäº†
- `tmux:question` - è³ªå•ç™ºç”Ÿ

---

## éå»ã®å®Ÿè£…ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼PTYï¼‰

tmuxæ¡ç”¨å‰ã®PTYç›´æ¥é€šä¿¡æ™‚ä»£ã®çŸ¥è¦‹ã€‚ç¾åœ¨ã¯tmuxãƒ™ãƒ¼ã‚¹ã ãŒå‚è€ƒã¨ã—ã¦æ®‹ã™ã€‚

### PTYé€ä¿¡ã®æ³¨æ„ç‚¹
```rust
// OK: åˆ†ã‘ã¦é€ä¿¡
self.write_input(message.as_bytes())?;
std::thread::sleep(std::time::Duration::from_millis(100));
self.write_input(b"\r")?;

// NG: ä¸€åº¦ã«é€ä¿¡ï¼ˆå¿œç­”ãŒè¿”ã£ã¦ã“ãªã„ï¼‰
self.write_input(format!("{}\r\n", message).as_bytes())?;
```

### Reactã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼äºŒé‡ç™»éŒ²å•é¡Œ
React StrictModeã§useEffectãŒ2å›å®Ÿè¡Œã•ã‚Œã‚‹å•é¡Œã®å›é¿ç­–ï¼š
```typescript
useEffect(() => {
  let mounted = true;
  const unlisteners: UnlistenFn[] = [];

  listen<string>("event-name", (event) => {
    if (!mounted) return;
    // ...
  }).then((unlisten) => {
    if (mounted) {
      unlisteners.push(unlisten);
    } else {
      unlisten();
    }
  });

  return () => {
    mounted = false;
    unlisteners.forEach((unlisten) => unlisten());
  };
}, []);
```
